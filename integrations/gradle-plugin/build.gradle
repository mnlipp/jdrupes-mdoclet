plugins {
	id "com.jfrog.bintray" version "1.7.3"
}

apply plugin: 'maven-publish'

dependencies {
    compile gradleApi()
    compile localGroovy()
}

// Configure sensible layout
sourceSets {
	main {
		groovy {
			srcDir 'src'
		}
		resources {
			srcDir 'resources'
		}
	}
}

processResources {
	//noinspection UnnecessaryQualifiedReference
	filter org.apache.tools.ant.filters.ReplaceTokens, tokens: [
			"org.jdrupes.mdoclet-version": project(':mdoclet').version
	]
}


publishing {
	
	publications {
		mavenJava(MavenPublication) {
			artifactId = project(':mdoclet').name + "-" + project.name
			from components.java
		}
	}
}

bintray {
	user = project.properties['bintrayUser'] ?: "nouser"
	key = project.properties['bintrayApiKey'] ?: "nokey"
	publications = ['mavenJava']
	pkg {
		repo = project.group
		name = project(':mdoclet').name + "-" + project.name
		version {
			 name = project.version
		}
	}
 }
